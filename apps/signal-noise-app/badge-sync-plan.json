{
  "timestamp": "2025-11-14T14:13:25.466Z",
  "description": "Sync Premier League and Championship badges from Neo4j to Supabase cached_entities table",
  "plan": {
    "insertStatements": "\n-- Insert Brentford FC (Premier League)\nINSERT INTO cached_entities (properties, badge_s3_url, cache_version, created_at, updated_at)\nSELECT \n  jsonb_build_object(\n    'name', 'Brentford FC',\n    'sport', 'Football',\n    'league', 'Premier League',\n    'type', 'Club'\n  ),\n  'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/brentford-fc-badge.png',\n  1,\n  NOW(),\n  NOW()\nWHERE NOT EXISTS (\n  SELECT 1 FROM cached_entities \n  WHERE properties->>'name' = 'Brentford FC' \n    AND properties->>'sport' = 'Football'\n);\n\n\n-- Insert Brighton & Hove Albion (Premier League)\nINSERT INTO cached_entities (properties, badge_s3_url, cache_version, created_at, updated_at)\nSELECT \n  jsonb_build_object(\n    'name', 'Brighton & Hove Albion',\n    'sport', 'Football',\n    'league', 'Premier League',\n    'type', 'Club'\n  ),\n  'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/brighton-and-hove-albion-badge.png',\n  1,\n  NOW(),\n  NOW()\nWHERE NOT EXISTS (\n  SELECT 1 FROM cached_entities \n  WHERE properties->>'name' = 'Brighton & Hove Albion' \n    AND properties->>'sport' = 'Football'\n);\n\n\n-- Insert Burnley (Premier League)\nINSERT INTO cached_entities (properties, badge_s3_url, cache_version, created_at, updated_at)\nSELECT \n  jsonb_build_object(\n    'name', 'Burnley',\n    'sport', 'Football',\n    'league', 'Premier League',\n    'type', 'Club'\n  ),\n  'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/burnley-badge.png',\n  1,\n  NOW(),\n  NOW()\nWHERE NOT EXISTS (\n  SELECT 1 FROM cached_entities \n  WHERE properties->>'name' = 'Burnley' \n    AND properties->>'sport' = 'Football'\n);\n\n\n-- Insert Fulham (Premier League)\nINSERT INTO cached_entities (properties, badge_s3_url, cache_version, created_at, updated_at)\nSELECT \n  jsonb_build_object(\n    'name', 'Fulham',\n    'sport', 'Football',\n    'league', 'Premier League',\n    'type', 'Club'\n  ),\n  'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/fulham-badge.png',\n  1,\n  NOW(),\n  NOW()\nWHERE NOT EXISTS (\n  SELECT 1 FROM cached_entities \n  WHERE properties->>'name' = 'Fulham' \n    AND properties->>'sport' = 'Football'\n);\n\n\n-- Insert Leeds United (Premier League)\nINSERT INTO cached_entities (properties, badge_s3_url, cache_version, created_at, updated_at)\nSELECT \n  jsonb_build_object(\n    'name', 'Leeds United',\n    'sport', 'Football',\n    'league', 'Premier League',\n    'type', 'Club'\n  ),\n  'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/leeds-united-badge.png',\n  1,\n  NOW(),\n  NOW()\nWHERE NOT EXISTS (\n  SELECT 1 FROM cached_entities \n  WHERE properties->>'name' = 'Leeds United' \n    AND properties->>'sport' = 'Football'\n);\n\n\n-- Insert Sunderland (Premier League)\nINSERT INTO cached_entities (properties, badge_s3_url, cache_version, created_at, updated_at)\nSELECT \n  jsonb_build_object(\n    'name', 'Sunderland',\n    'sport', 'Football',\n    'league', 'Premier League',\n    'type', 'Club'\n  ),\n  'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/sunderland-badge.png',\n  1,\n  NOW(),\n  NOW()\nWHERE NOT EXISTS (\n  SELECT 1 FROM cached_entities \n  WHERE properties->>'name' = 'Sunderland' \n    AND properties->>'sport' = 'Football'\n);\n\n\n-- Insert Tottenham (Premier League)\nINSERT INTO cached_entities (properties, badge_s3_url, cache_version, created_at, updated_at)\nSELECT \n  jsonb_build_object(\n    'name', 'Tottenham',\n    'sport', 'Football',\n    'league', 'Premier League',\n    'type', 'Club'\n  ),\n  'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/tottenham-badge.png',\n  1,\n  NOW(),\n  NOW()\nWHERE NOT EXISTS (\n  SELECT 1 FROM cached_entities \n  WHERE properties->>'name' = 'Tottenham' \n    AND properties->>'sport' = 'Football'\n);\n\n\n-- Insert Coventry City (English League Championship)\nINSERT INTO cached_entities (properties, badge_s3_url, cache_version, created_at, updated_at)\nSELECT \n  jsonb_build_object(\n    'name', 'Coventry City',\n    'sport', 'Football',\n    'league', 'English League Championship',\n    'type', 'Club'\n  ),\n  'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/coventry-city-badge.png',\n  1,\n  NOW(),\n  NOW()\nWHERE NOT EXISTS (\n  SELECT 1 FROM cached_entities \n  WHERE properties->>'name' = 'Coventry City' \n    AND properties->>'sport' = 'Football'\n);\n\n\n-- Insert Derby County (English League Championship)\nINSERT INTO cached_entities (properties, badge_s3_url, cache_version, created_at, updated_at)\nSELECT \n  jsonb_build_object(\n    'name', 'Derby County',\n    'sport', 'Football',\n    'league', 'English League Championship',\n    'type', 'Club'\n  ),\n  'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/derby-county-badge.png',\n  1,\n  NOW(),\n  NOW()\nWHERE NOT EXISTS (\n  SELECT 1 FROM cached_entities \n  WHERE properties->>'name' = 'Derby County' \n    AND properties->>'sport' = 'Football'\n);\n\n\n-- Insert Ipswich Town (English League Championship)\nINSERT INTO cached_entities (properties, badge_s3_url, cache_version, created_at, updated_at)\nSELECT \n  jsonb_build_object(\n    'name', 'Ipswich Town',\n    'sport', 'Football',\n    'league', 'English League Championship',\n    'type', 'Club'\n  ),\n  'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/ipswich-town-badge.png',\n  1,\n  NOW(),\n  NOW()\nWHERE NOT EXISTS (\n  SELECT 1 FROM cached_entities \n  WHERE properties->>'name' = 'Ipswich Town' \n    AND properties->>'sport' = 'Football'\n);\n\n\n-- Insert Middlesbrough (English League Championship)\nINSERT INTO cached_entities (properties, badge_s3_url, cache_version, created_at, updated_at)\nSELECT \n  jsonb_build_object(\n    'name', 'Middlesbrough',\n    'sport', 'Football',\n    'league', 'English League Championship',\n    'type', 'Club'\n  ),\n  'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/middlesbrough-badge.png',\n  1,\n  NOW(),\n  NOW()\nWHERE NOT EXISTS (\n  SELECT 1 FROM cached_entities \n  WHERE properties->>'name' = 'Middlesbrough' \n    AND properties->>'sport' = 'Football'\n);\n\n\n-- Insert Millwall (English League Championship)\nINSERT INTO cached_entities (properties, badge_s3_url, cache_version, created_at, updated_at)\nSELECT \n  jsonb_build_object(\n    'name', 'Millwall',\n    'sport', 'Football',\n    'league', 'English League Championship',\n    'type', 'Club'\n  ),\n  'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/millwall-badge.png',\n  1,\n  NOW(),\n  NOW()\nWHERE NOT EXISTS (\n  SELECT 1 FROM cached_entities \n  WHERE properties->>'name' = 'Millwall' \n    AND properties->>'sport' = 'Football'\n);\n\n\n-- Insert Norwich City (English League Championship)\nINSERT INTO cached_entities (properties, badge_s3_url, cache_version, created_at, updated_at)\nSELECT \n  jsonb_build_object(\n    'name', 'Norwich City',\n    'sport', 'Football',\n    'league', 'English League Championship',\n    'type', 'Club'\n  ),\n  'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/norwich-city-badge.png',\n  1,\n  NOW(),\n  NOW()\nWHERE NOT EXISTS (\n  SELECT 1 FROM cached_entities \n  WHERE properties->>'name' = 'Norwich City' \n    AND properties->>'sport' = 'Football'\n);\n\n\n-- Insert Sheffield United (English League Championship)\nINSERT INTO cached_entities (properties, badge_s3_url, cache_version, created_at, updated_at)\nSELECT \n  jsonb_build_object(\n    'name', 'Sheffield United',\n    'sport', 'Football',\n    'league', 'English League Championship',\n    'type', 'Club'\n  ),\n  'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/sheffield-united-badge.png',\n  1,\n  NOW(),\n  NOW()\nWHERE NOT EXISTS (\n  SELECT 1 FROM cached_entities \n  WHERE properties->>'name' = 'Sheffield United' \n    AND properties->>'sport' = 'Football'\n);\n\n\n-- Insert Sheffield Wednesday (English League Championship)\nINSERT INTO cached_entities (properties, badge_s3_url, cache_version, created_at, updated_at)\nSELECT \n  jsonb_build_object(\n    'name', 'Sheffield Wednesday',\n    'sport', 'Football',\n    'league', 'English League Championship',\n    'type', 'Club'\n  ),\n  'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/sheffield-wednesday-badge.png',\n  1,\n  NOW(),\n  NOW()\nWHERE NOT EXISTS (\n  SELECT 1 FROM cached_entities \n  WHERE properties->>'name' = 'Sheffield Wednesday' \n    AND properties->>'sport' = 'Football'\n);\n\n\n-- Insert Southampton (English League Championship)\nINSERT INTO cached_entities (properties, badge_s3_url, cache_version, created_at, updated_at)\nSELECT \n  jsonb_build_object(\n    'name', 'Southampton',\n    'sport', 'Football',\n    'league', 'English League Championship',\n    'type', 'Club'\n  ),\n  'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/southampton-badge.png',\n  1,\n  NOW(),\n  NOW()\nWHERE NOT EXISTS (\n  SELECT 1 FROM cached_entities \n  WHERE properties->>'name' = 'Southampton' \n    AND properties->>'sport' = 'Football'\n);\n\n\n-- Insert Swansea City (English League Championship)\nINSERT INTO cached_entities (properties, badge_s3_url, cache_version, created_at, updated_at)\nSELECT \n  jsonb_build_object(\n    'name', 'Swansea City',\n    'sport', 'Football',\n    'league', 'English League Championship',\n    'type', 'Club'\n  ),\n  'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/swansea-city-badge.png',\n  1,\n  NOW(),\n  NOW()\nWHERE NOT EXISTS (\n  SELECT 1 FROM cached_entities \n  WHERE properties->>'name' = 'Swansea City' \n    AND properties->>'sport' = 'Football'\n);\n\n\n-- Insert Watford (English League Championship)\nINSERT INTO cached_entities (properties, badge_s3_url, cache_version, created_at, updated_at)\nSELECT \n  jsonb_build_object(\n    'name', 'Watford',\n    'sport', 'Football',\n    'league', 'English League Championship',\n    'type', 'Club'\n  ),\n  'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/watford-badge.png',\n  1,\n  NOW(),\n  NOW()\nWHERE NOT EXISTS (\n  SELECT 1 FROM cached_entities \n  WHERE properties->>'name' = 'Watford' \n    AND properties->>'sport' = 'Football'\n);\n\n\n-- Insert West Bromwich Albion (English League Championship)\nINSERT INTO cached_entities (properties, badge_s3_url, cache_version, created_at, updated_at)\nSELECT \n  jsonb_build_object(\n    'name', 'West Bromwich Albion',\n    'sport', 'Football',\n    'league', 'English League Championship',\n    'type', 'Club'\n  ),\n  'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/west-bromwich-albion-badge.png',\n  1,\n  NOW(),\n  NOW()\nWHERE NOT EXISTS (\n  SELECT 1 FROM cached_entities \n  WHERE properties->>'name' = 'West Bromwich Albion' \n    AND properties->>'sport' = 'Football'\n);\n",
    "updateStatements": "\n-- Update Brentford FC (Premier League) badge\nUPDATE cached_entities \nSET badge_s3_url = 'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/brentford-fc-badge.png',\n    updated_at = NOW()\nWHERE properties->>'name' = 'Brentford FC' \n  AND properties->>'sport' = 'Football';\n\n\n-- Update Brighton & Hove Albion (Premier League) badge\nUPDATE cached_entities \nSET badge_s3_url = 'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/brighton-and-hove-albion-badge.png',\n    updated_at = NOW()\nWHERE properties->>'name' = 'Brighton & Hove Albion' \n  AND properties->>'sport' = 'Football';\n\n\n-- Update Burnley (Premier League) badge\nUPDATE cached_entities \nSET badge_s3_url = 'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/burnley-badge.png',\n    updated_at = NOW()\nWHERE properties->>'name' = 'Burnley' \n  AND properties->>'sport' = 'Football';\n\n\n-- Update Fulham (Premier League) badge\nUPDATE cached_entities \nSET badge_s3_url = 'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/fulham-badge.png',\n    updated_at = NOW()\nWHERE properties->>'name' = 'Fulham' \n  AND properties->>'sport' = 'Football';\n\n\n-- Update Leeds United (Premier League) badge\nUPDATE cached_entities \nSET badge_s3_url = 'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/leeds-united-badge.png',\n    updated_at = NOW()\nWHERE properties->>'name' = 'Leeds United' \n  AND properties->>'sport' = 'Football';\n\n\n-- Update Sunderland (Premier League) badge\nUPDATE cached_entities \nSET badge_s3_url = 'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/sunderland-badge.png',\n    updated_at = NOW()\nWHERE properties->>'name' = 'Sunderland' \n  AND properties->>'sport' = 'Football';\n\n\n-- Update Tottenham (Premier League) badge\nUPDATE cached_entities \nSET badge_s3_url = 'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/tottenham-badge.png',\n    updated_at = NOW()\nWHERE properties->>'name' = 'Tottenham' \n  AND properties->>'sport' = 'Football';\n\n\n-- Update Coventry City (English League Championship) badge\nUPDATE cached_entities \nSET badge_s3_url = 'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/coventry-city-badge.png',\n    updated_at = NOW()\nWHERE properties->>'name' = 'Coventry City' \n  AND properties->>'sport' = 'Football';\n\n\n-- Update Derby County (English League Championship) badge\nUPDATE cached_entities \nSET badge_s3_url = 'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/derby-county-badge.png',\n    updated_at = NOW()\nWHERE properties->>'name' = 'Derby County' \n  AND properties->>'sport' = 'Football';\n\n\n-- Update Ipswich Town (English League Championship) badge\nUPDATE cached_entities \nSET badge_s3_url = 'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/ipswich-town-badge.png',\n    updated_at = NOW()\nWHERE properties->>'name' = 'Ipswich Town' \n  AND properties->>'sport' = 'Football';\n\n\n-- Update Middlesbrough (English League Championship) badge\nUPDATE cached_entities \nSET badge_s3_url = 'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/middlesbrough-badge.png',\n    updated_at = NOW()\nWHERE properties->>'name' = 'Middlesbrough' \n  AND properties->>'sport' = 'Football';\n\n\n-- Update Millwall (English League Championship) badge\nUPDATE cached_entities \nSET badge_s3_url = 'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/millwall-badge.png',\n    updated_at = NOW()\nWHERE properties->>'name' = 'Millwall' \n  AND properties->>'sport' = 'Football';\n\n\n-- Update Norwich City (English League Championship) badge\nUPDATE cached_entities \nSET badge_s3_url = 'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/norwich-city-badge.png',\n    updated_at = NOW()\nWHERE properties->>'name' = 'Norwich City' \n  AND properties->>'sport' = 'Football';\n\n\n-- Update Sheffield United (English League Championship) badge\nUPDATE cached_entities \nSET badge_s3_url = 'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/sheffield-united-badge.png',\n    updated_at = NOW()\nWHERE properties->>'name' = 'Sheffield United' \n  AND properties->>'sport' = 'Football';\n\n\n-- Update Sheffield Wednesday (English League Championship) badge\nUPDATE cached_entities \nSET badge_s3_url = 'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/sheffield-wednesday-badge.png',\n    updated_at = NOW()\nWHERE properties->>'name' = 'Sheffield Wednesday' \n  AND properties->>'sport' = 'Football';\n\n\n-- Update Southampton (English League Championship) badge\nUPDATE cached_entities \nSET badge_s3_url = 'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/southampton-badge.png',\n    updated_at = NOW()\nWHERE properties->>'name' = 'Southampton' \n  AND properties->>'sport' = 'Football';\n\n\n-- Update Swansea City (English League Championship) badge\nUPDATE cached_entities \nSET badge_s3_url = 'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/swansea-city-badge.png',\n    updated_at = NOW()\nWHERE properties->>'name' = 'Swansea City' \n  AND properties->>'sport' = 'Football';\n\n\n-- Update Watford (English League Championship) badge\nUPDATE cached_entities \nSET badge_s3_url = 'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/watford-badge.png',\n    updated_at = NOW()\nWHERE properties->>'name' = 'Watford' \n  AND properties->>'sport' = 'Football';\n\n\n-- Update West Bromwich Albion (English League Championship) badge\nUPDATE cached_entities \nSET badge_s3_url = 'https://sportsintelligence.s3.eu-north-1.amazonaws.com/badges/west-bromwich-albion-badge.png',\n    updated_at = NOW()\nWHERE properties->>'name' = 'West Bromwich Albion' \n  AND properties->>'sport' = 'Football';\n",
    "verificationQuery": "\nSELECT \n  properties->>'name' as name,\n  properties->>'league' as league,\n  badge_s3_url\nFROM cached_entities \nWHERE properties->>'sport' = 'Football'\n  AND properties->>'league' IN ('Premier League', 'English League Championship', 'League One', 'League Two')\n  AND badge_s3_url IS NOT NULL\nORDER BY properties->>'league', properties->>'name';\n",
    "totalTeams": 19
  }
}