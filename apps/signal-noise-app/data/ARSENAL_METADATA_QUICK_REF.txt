================================================================================
ARSENAL FC - METADATA QUICK REFERENCE
================================================================================

ğŸ“Š WHAT IS METADATA?
Metadata is a JSON field inside each Hypothesis node in FalkorDB that stores
the complete discovery trail: URLs, evidence, reasoning, costs, and timestamps.

================================================================================
ğŸ“ WHERE TO FIND IT
================================================================================

Database:  FalkorDB (graph database)
Node:      (:Hypothesis {hypothesis_id, entity_id, metadata})
Field:     metadata (JSON string)

Access:
  Python: hypothesis.metadata
  Cypher: MATCH (h:Hypothesis {entity_id: "arsenal-fc"}) RETURN h.metadata

File:     data/arsenal_fc_metadata_example.json (saved example)

================================================================================
ğŸ“¦ WHAT'S INSIDE (7 main sections)
================================================================================

1. discovered_urls (JSON array)
   â””â”€ All URLs explored during discovery
   â””â”€ Example: ["https://arsenal.com/careers", "https://linkedin.com/company/arsenal"]

2. evidence_excerpts (JSON array)
   â””â”€ Relevant text/content discovered from each URL
   â””â”€ Example: ["Arsenal is seeking a CRM Manager...", "Tech stack: Salesforce..."]

3. hop_history (JSON array)
   â””â”€ Step-by-step AI reasoning trail with timestamps
   â””â”€ Each hop contains:
      â”œâ”€ hop_type: "official_site" | "linkedin" | "job_boards"
      â”œâ”€ url: The exact page visited
      â”œâ”€ decision: "ACCEPT" | "WEAK_ACCEPT" | "REJECT" | "NO_PROGRESS"
      â”œâ”€ confidence_delta: How much confidence changed (+0.06, +0.02, 0.0)
      â”œâ”€ justification: Why this decision was made
      â”œâ”€ evidence_found: Key text snippet discovered
      â”œâ”€ reasoning: Detailed AI reasoning process
      â”œâ”€ timestamp: When this hop executed
      â”œâ”€ cost_usd: Cost of this hop
      â””â”€ tokens_used: Claude tokens consumed

4. cost_breakdown (JSON object)
   â””â”€ Total cost, API calls, token counts, averages

5. discovery_summary (JSON object)
   â””â”€ Total hops, decision counts, confidence trajectory, status

6. reasoning_summary (text)
   â””â”€ Human-readable summary of the entire discovery process

7. discovery_timestamp (string)
   â””â”€ When discovery was executed

================================================================================
ğŸ” KEY INSIGHTS FROM ARSENAL'S METADATA
================================================================================

Confidence Growth: 0.50 â†’ 0.76 (+0.26 over 5 hops)

Strongest Evidence:
1. CRM Manager job posting (+0.06) - Active procurement signal
2. Technology stack confirmation (+0.06) - Salesforce listed as primary
3. Official Salesforce partnership (+0.06) - Stadium page confirmation
4. Digital transformation initiative (+0.06) - Broader modernization
5. LinkedIn corroboration (+0.02) - Public Salesforce usage

Decision Distribution:
  ACCEPT: 4 hops (strong evidence found)
  WEAK_ACCEPT: 1 hop (supporting evidence)
  REJECT: 0 hops (no contradictory evidence)
  NO_PROGRESS: 0 hops (all sources relevant)

Total Cost: $0.15 (5 hops Ã— ~$0.03 per hop)

Status: ACTIVE (confidence 0.76, below 0.70 actionable threshold)

================================================================================
ğŸ’¾ HOW TO ACCESS
================================================================================

1. From Python:
   from backend.hypothesis_persistence_native import HypothesisRepository
   
   repo = HypothesisRepository()
   await repo.initialize()
   
   h = await repo.get_hypothesis("digital_transformation_procurement", "arsenal-fc")
   metadata = h.metadata
   urls = metadata['discovered_urls']
   reasoning = metadata['hop_history']

2. From File (saved example):
   import json
   
   with open('data/arsenal_fc_metadata_example.json') as f:
       metadata = json.load(f)

3. Query FalkorDB directly:
   MATCH (h:Hypothesis {entity_id: "arsenal-fc"})
   RETURN h.metadata

================================================================================
ğŸ“Š METADATA STRUCTURE DIAGRAM
================================================================================

Hypothesis Node in FalkorDB:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (:Hypothesis {                                                       â”‚
â”‚   hypothesis_id: "digital_transformation_procurement",        â”‚
â”‚   entity_id: "arsenal-fc",                                   â”‚
â”‚   confidence: 0.76,                                            â”‚
â”‚   status: "ACTIVE",                                             â”‚
â”‚   iterations_attempted: 5,                                     â”‚
â”‚   metadata: "{                                                   â”‚
â”‚     \"discovered_urls\": [...],                                â”‚
â”‚     \"evidence_excerpts\": [...],                              â”‚
â”‚     \"hop_history\": [...],                                     â”‚
â”‚     \"cost_breakdown\": {...},                                  â”‚
â”‚     \"discovery_summary\": {...}                                â”‚
â”‚   }"                                                           â”‚
â”‚ })                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Each hop in hop_history:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ {                                                              â”‚
â”‚   "hop_type": "official_site",                                â”‚
â”‚   "url": "https://arsenal.com/careers",                      â”‚
â”‚   "decision": "ACCEPT",                                       â”‚
â”‚   "confidence_delta": 0.06,                                    â”‚
â”‚   "justification": "Strong procurement signal...",              â”‚
â”‚   "evidence_found": "Arsenal is seeking a CRM Manager...",      â”‚
â”‚   "reasoning": "Job posting explicitly mentions...",            â”‚
â”‚   "timestamp": "2026-02-03T06:12:00Z",                        â”‚
â”‚   "cost_usd": 0.03                                            â”‚
â”‚ }                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
ğŸ¯ USE CASES
================================================================================

1. AUDIT TRAIL: See exactly what URLs were visited and why
2. REPRODUCIBILITY: Re-run discovery with same inputs to verify results
3. ANALYSIS: Extract all evidence for sales outreach
4. DEBUGGING: Understand why a hypothesis reached its confidence level
5. COMPLIANCE: Maintain record of how decisions were made
6. OPTIMIZATION: Analyze which hop types provide strongest signals

================================================================================
